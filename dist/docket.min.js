!function(t,i){"use strict";function e(t){if(!(this instanceof e))return new e(t);if(!t.target)throw new Error("You must specify the target element");this._docket=null,this._target=null,this._posts=[],this._position="",this._expires=null,this._condition="",this._currDate=new Date,this._cookieName="docket-history",this._styles=".docket-pin{font:normal 12px/1 Arial,sans-serif !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;position:absolute !important;display:inline-block !important;text-align:center !important;color:#fff !important;padding:4px 3px !important;height:19px !important;min-width:19px !important;-webkit-border-radius:50% !important;border-radius:50% !important;background-color:#fe0000 !important;-webkit-box-shadow:-1px 2px 3px rgba(0,0,0,0.4) !important;box-shadow:-1px 2px 3px rgba(0,0,0,0.4) !important}.docket-pin.right-top{top:-11px;right:-11px}.docket-pin.right-bottom{bottom:-11px;right:-11px}.docket-pin.left-bottom{bottom:-11px;left:-11px}.docket-pin.left-top{top:-11px;left:-11px}.docket-pin.docket-unpin{-webkit-animation:docket-unpin-animation .1s ease-out forwards;animation:docket-unpin-animation .1s ease-out forwards}@-webkit-keyframes docket-unpin-animation{from{opacity:1;-webkit-transform:scale(1);transform:scale(1)}to{opacity:0;-webkit-transform:scale(0);transform:scale(0)}}@keyframes docket-unpin-animation{from{opacity:1;-webkit-transform:scale(1);transform:scale(1)}to{opacity:0;-webkit-transform:scale(0);transform:scale(0)}}",this.init(t)}e.defaults={position:"right-top",expires:0},e.prototype.init=function(t){this._target=i.querySelector(t.target),this._posts=this.getPosts(this._target.getAttribute("data-posts")),this._position=t.position||e.defaults.position,this._expires=parseInt(t.expires)||e.defaults.expires,this._condition=this.trimSlashes(t.condition.trim()),this._posts&&this.checkConditions()},e.prototype.checkConditions=function(){var t=this.countItems();t>0&&this.createStyles().pinDocket(t),this._condition===this.trimSlashes(this.getLocation())&&this.setHistory().unpinDocket()},e.prototype.getPosts=function(t){var i=void 0!==t?t.split(","):"";if(""!==i[0]){for(var e=0;e<i.length;e++)i[e]=i[e].trim(),""===i[e]&&i.slice(e,1);return i}return!1},e.prototype.getLocation=function(){return t.location.href.toString().split(t.location.host)[1].split("?")[0]},e.prototype.trimSlashes=function(t){return t.replace(/^\/|\/$/g,"")},e.prototype.documentReady=function(t){(i.attachEvent?"complete"===i.readyState:"loading"!==i.readyState)?t():i.addEventListener("DOMContentLoaded",t)},e.prototype.createStyles=function(){var t=i.createElement("style");return t.setAttribute("id","docket-styles"),t.innerHTML=this._styles,i.body.appendChild(t),this},e.prototype.pinDocket=function(t){return this._docket=i.createElement("div"),this._docket.setAttribute("class","docket-pin "+this._position),this._docket.innerHTML=t,this._target.style.position="relative",this._target.appendChild(this._docket),this},e.prototype.unpinDocket=function(){return null!==this._docket&&this.documentReady(function(){setTimeout(function(){this._docket.classList.add("docket-unpin")}.bind(this),500)}.bind(this)),this},e.prototype.writeCookie=function(t,e,o){o=o||{},e=encodeURIComponent(e);var n=o.expires,r=t+"="+e,s=this._currDate;for(var p in"number"==typeof n&&n&&(s.setTime(s.getTime()+1e3*n),n=o.expires=s),n&&n.toUTCString&&(o.expires=n.toUTCString()),o)r+="; "+p,!0!==o[p]&&(r+="="+o[p]);i.cookie=r},e.prototype.readCookie=function(t){var e=i.cookie.match(new RegExp("(?:^|; )"+t.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return e?decodeURIComponent(e[1]):void 0},e.prototype.deleteCookie=function(t){this.writeCookie(t,"",{path:"/",expires:-1})},e.prototype.countItems=function(){var t=this._posts.length,i=this.readCookie(this._cookieName);if(i){i=i.split(",");for(var e=0;e<i.length;e++)-1!==this._posts.indexOf(i[e])&&t--}return t},e.prototype.setHistory=function(){return this.writeCookie(this._cookieName,this._posts.toString(),{path:"/",expires:this._expires}),this},t.Docket=e}(window,document);